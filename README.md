# Лабораторная работа №2

## Задание

На основе изученного материала лабораторной работы, лекций (2 и 3), дополнительных источников напишите скрипт, который на вход принимает IPv4-адрес в десятичном формате, а на выходе обеспечивает данный IP-адрес в двоичном формате.

## Ход работы

Для того, чтобы выполнить работу я воспользовался терминалом Mac. Через него я сначала создал файл скрипта и открыл его через редактор `nano`:

```bash
touch script.bash
nano script.bash
```

В первой строке файла я указал, что для обработки скрипта нужно использовать `bash`:

```bash
#!/bin/bash
```

Далее я проверяю, что в скрипт передан ровно один параметр – IP адрес. Если параметр один, то добавляю его в переменную `$IP`.

```bash
if [[ $# -ne 1 ]]; then
    echo "Script takes one argument"
    exit 1
fi

IP=$1
```

После этого я создаю массив с 4-мя частями IP адреса, который мы разделили через точки с помощью системной переменной `IFS`. Так же тут я проверяю, что пользователь передал корректный IP адрес, который должен состоять из 4-ёх частей.

```bash
declare -a PARTS
IFS="." read -r -a PARTS <<< "$IP"

if [[ ${#PARTS[@]} -ne 4 ]]; then
  echo "IP-adress only includes 4 parts"
  exit 1
fi
```

Теперь начинаем массив, где переводим каждую часть в двоичную форму, добавляем введущие нули и результат переносим в преждевременно созданный массив `RESULTS`. Так же в массиве мы опять проверяем корректность IP адреса: каждая часть должна быть числом от 0 до 255.

```bash
declare -a RESULTS
for i in "${!IP_PARTS[@]}"; do
  PART="${IP_PARTS[i]}"
  if  [[ ! "$PART" =~ ^[0-9]+$ ]] || ((PART < 0 || PART > 255)); then
    echo "Parts of IP-address should be numbers between 0 and 255"
    exit 1
  fi

  RESULTS[$i]=$(echo "obase=2; ${IP_PARTS[$i]}" | bc)
done
```

В конце выводим готовый результат из массива `RESULTS`

```bash
printf "%08d.%08d.%08d.%08d\n" "${RESULTS[@]}"
```
